!include ../components.puml
@startuml simple-work-item-operations
title Ergonaut â€” Simple Work Item Operations
autonumber

actor User
participant UI
participant API
database DB

== Create Work Item ==
User -> UI : Click "New Work Item"\nenter title/fields
UI -> API : POST /projects/{projectId}/work-items\n{ title, description?, dueDate?, assignedTo? }
API -> API : Resolve currentUserId
API -> DB : INSERT WorkItem(\n  projectId,\n  title,\n  description?,\n  dueDate?,\n  assignedTo?,\n  status=WorkItemStatus.Todo,\n  createdBy=currentUserId,\n  createdAt\n)
DB --> API : WorkItem { id, projectId, title, description?, status=WorkItemStatus.Todo,\n  dueDate?, assignedTo?, createdAt, createdBy }
API --> UI : 201 Created + WorkItemDto
UI --> User : Show work item details

== Edit Work Item (Details) ==
User -> UI : Open work item â€¢ edit field(s)
UI -> API : PATCH /projects/{projectId}/work-items/{id}\n{ title?, description?, status?, assignedTo?, dueDate? }
API -> DB : UPDATE WorkItem SET\n  title = ?,\n  description = ?,\n  status = ?,\n  assignedTo = ?,\n  dueDate = ?\nWHERE id = {id}
DB --> API : WorkItem { id, projectId, title, description?, status, assignedTo?, dueDate?, createdAt, createdBy }
API --> UI : 200 OK + WorkItemDto
UI --> User : Render updated work item

@enduml